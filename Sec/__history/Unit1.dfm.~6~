object Form1: TForm1
  Left = 0
  Top = 0
  Caption = 'Form1'
  ClientHeight = 299
  ClientWidth = 635
  Color = clBtnFace
  Font.Charset = DEFAULT_CHARSET
  Font.Color = clWindowText
  Font.Height = -11
  Font.Name = 'Tahoma'
  Font.Style = []
  OldCreateOrder = False
  PixelsPerInch = 96
  TextHeight = 13
  object OraSession1: TOraSession
    Options.Direct = True
    Username = 'creator'
    Password = '123456'
    Server = '192.168.1.89:1521:STAR'
    LoginPrompt = False
    HomeName = 'OraHome92'
    Left = 152
    Top = 56
  end
  object OraQuery1: TOraQuery
    Session = OraSession1
    SQL.Strings = (
      
        'select WM_CONCAT( distinct a.id_orders ) AS id_orders, a.date_tr' +
        'uck, a.date_truck_out, '
      
        ' LISTAGG( s.s_name_ru, '#39', '#39' ) WITHIN GROUP (ORDER BY s_name_ru) ' +
        'as s_name_ru,'
      ' WM_CONCAT( distinct d.DIST_IND_ID ) as DIST_IND_ID'
      'from orders a, suppliers s, DISTRIBUTIONS_INDEX d'
      'where a.id_departments = :id_dep '
      '  and a.date_truck between :p1 and :p2'
      '  and a.active = 1 '
      '  and a.n_type = 0 '
      '  and a.S_ID = s.S_ID(+)'
      '  and a.id_orders = d.ID_ORDERS(+)'
      'group by a.date_truck, a.date_truck_out'
      'order by a.date_truck')
    Left = 240
    Top = 72
    ParamData = <
      item
        DataType = ftUnknown
        Name = 'id_dep'
      end
      item
        DataType = ftUnknown
        Name = 'p1'
      end
      item
        DataType = ftUnknown
        Name = 'p2'
      end>
  end
  object OraQuery2: TOraQuery
    Session = OraSession1
    SQL.Strings = (
      
        'SELECT 0 as checked, l.nick, l.nick as nick_name, l.fio, l.id_cl' +
        'ients_groups, l.group_name        '
      'FROM CLIENTS_VIEW2 l, orders_clients oc, TMP_EXP_DOC d'
      
        'where l.id_clients = oc.id_clients and oc.id_orders = d.ID_DOC a' +
        'nd l.id_clients_groups not in (41)'
      '  and oc.active = 1 and oc.pack_ = :vPack'
      '  and oc.id_clients not in (CONST_DIR, CONST_MAIN)'
      '  group by l.nick, l.fio, l.id_clients_groups, l.group_name'
      '  order by l.nick')
    Left = 328
    Top = 72
    ParamData = <
      item
        DataType = ftUnknown
        Name = 'vPack'
      end>
  end
  object OraQuery3: TOraQuery
    Session = OraSession1
    SQL.Strings = (
      
        'SELECT row_number() over(PARTITION by a.n_id order by a.INVOICE_' +
        'DATA_ID) as nn,'
      
        '                    a.PREP_DIST_ID, a.DIST_IND_ID, a.N_ID, a.INV' +
        'OICE_DATA_ID, a.ID_STORE_MAIN, a.TOTAL_QUANTITY,'
      
        '                    a.LEFT_QUANTITY, a.COMPILED_NAME, a.compiled' +
        '_name_otdel||'#39' '#39'||a.colour as compiled_name_otdel, a.ft_id, a.fs' +
        't_id, a.f_type,'
      
        '                    DECODE(a.INVOICE_DATA_ID, NULL, '#39#1089#1090#1086#1082#39', '#39#1080#1085#1074 +
        #1086#1081#1089#39') AS WHERE_FLOWER_IS'
      
        '                    , nvl(b.nbutton,0) as nbutton, a.hol_sub_typ' +
        'e , a.F_NAME_RU'
      
        '                    , nvl(b.nbutton,0) || '#39': '#39' || a.hol_type as ' +
        'hol_type'
      '                    ,o.qq as qq1, oa.qq as qq2'
      
        '                FROM PREP_DIST_VIEW a, buttons_set b, tmp_exp_do' +
        'c_2 d'
      '                    , (select sum(ol.QUANTITY) as qq, ol.n_id'
      
        '                        from orders_list ol, orders_clients oc, ' +
        'TMP_EXP_DOC d'
      
        '                        where ol.ID_ORDERS_CLIENTS = oc.ID_ORDER' +
        'S_CLIENTS and oc.ID_ORDERS = d.id_doc and oc.ID_CLIENTS = :vClie' +
        'nt and ol.active=1 and oc.active=1'
      '                        group by ol.n_id'
      '                      ) o'
      '                    , (select sum(ol.QUANTITY) as qq, ol.n_id'
      
        '                        from orders_list ol, orders_clients oc, ' +
        'TMP_EXP_DOC d'
      
        '                        where ol.ID_ORDERS_CLIENTS = oc.ID_ORDER' +
        'S_CLIENTS and oc.ID_ORDERS = d.id_doc and ol.active=1 and oc.act' +
        'ive=1'
      
        '                           and oc.ID_CLIENTS not in (const_dir,c' +
        'onst_main) '
      '                        group by ol.n_id'
      '                      ) oa'
      '                WHERE a.DIST_IND_ID = d.id_doc'
      '                    and a.INVOICE_DATA_ID is not null'
      '                    and LEFT_QUANTITY > 0'
      '                    and a.n_id = o.n_id(+)'
      '                    and a.n_id = oa.n_id(+)'
      '                    and a.fst_id =  b.fst_id(+)'
      '                order by a.compiled_name_otdel||'#39' '#39'||a.colour')
    Left = 456
    Top = 24
    ParamData = <
      item
        DataType = ftUnknown
        Name = 'vClient'
      end>
  end
  object OraQuery4: TOraQuery
    Session = OraSession1
    SQL.Strings = (
      
        'SELECT c.n_id, c.quantity, m.price*c.quantity, c.zatirka, c.id_o' +
        'rders_list, d.compiled_name_otdel, d.colour,'
      
        '       case when (e.INVOICE_DATA_ID is NULL and e.DQ > 0) then 1' +
        ' else 0 end is_stock,'
      
        '       nvl(e.dq,0) as dq, case when e.DQ is null then 0 else 1 e' +
        'nd dq_check,'
      '       e.dist_id, '
      
        '       case when e.D_N_ID = c.n_id then d.compiled_name_otdel el' +
        'se e.compiled_name_otdel||'#39' '#39'||e.colour end compiled_name_otdel_' +
        'razn'
      '       , e.colour as colour_razn    '
      
        'FROM ORDERS_CLIENTS a, price_list m, orders_list c, nomenclature' +
        '_mat_view d, DISTRIBUTION_VIEW e, TMP_EXP_DOC td, clients cl'
      'WHERE a.id_orders = td.id_doc'
      '  and a.active = 1'
      '  and c.n_id = m.n_id'
      '  and a.id_clients = cl.id_clients'
      '  and cl.nick = :vNick'
      '  and a.pack_ = :vPack'
      '  and a.id_orders_clients = c.id_orders_clients'
      '  and c.n_id = d.n_id'
      '  and c.active = 1'
      '  and c.id_orders_list = e.id_orders_list(+)'
      'order by  d.compiled_name_otdel')
    Left = 248
    Top = 136
    ParamData = <
      item
        DataType = ftUnknown
        Name = 'vNick'
      end
      item
        DataType = ftUnknown
        Name = 'vPack'
      end>
  end
  object OraQuery5: TOraQuery
    Left = 560
    Top = 136
  end
  object OraQuery6: TOraQuery
    Left = 568
    Top = 192
  end
  object OraDataSource1: TOraDataSource
    DataSet = OraQuery1
    Left = 280
    Top = 72
  end
  object OraDataSource2: TOraDataSource
    DataSet = OraQuery2
    Left = 368
    Top = 72
  end
  object OraDataSource3: TOraDataSource
    DataSet = OraQuery3
    Left = 456
    Top = 72
  end
  object OraDataSource4: TOraDataSource
    Left = 576
    Top = 248
  end
end
